<div class="slds-form--horizontal" *ngIf="!isLoading">
    <form novalidate [formGroup]="form">
        <cbs-form-input-control
            [requiredField]="true"
            [fieldLabel]="'NAME' | translate"
            [hasError]="form.get('name').errors && form.get('name').touched"
            [formControlName]="'name'">
        </cbs-form-input-control>

        <cbs-form-lookup-control
            [requiredField]="true"
            searchPlaceholder="{{ 'SEARCH' | translate }}"
            selectPlaceholder="{{ 'SELECT' | translate }}"
            [fieldLabel]="'BRANCH' | translate"
            [hasError]="form.get('branchId').errors && form.get('branchId').touched"
            [formControlName]="'branchId'"
            [picklistDataUrl]="config">
        </cbs-form-lookup-control>

        <div formArrayName="accounts" class="cbs-collateral-form__fields">

            <ng-container
                *ngFor="let field of customFields; let ind=index;"
                cbsDynamicField
                [config]="field"
                [group]="form.controls['accounts'].controls[ind]">
            </ng-container>
        </div>
    </form>
</div>
